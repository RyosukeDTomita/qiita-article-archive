---
title: Haskellで競技プログラミングに参加するための最低限の環境を構築する
tags:
  - Haskell
  - AtCoder
  - 環境構築
  - 競技プログラミング
private: false
updated_at: '2025-12-22T10:43:46+09:00'
id: 12d822caf5fcb696c56d
organization_url_name: nri
slide: false
ignorePublish: false
---
## これは何?

本記事はアドベントカレンダー3日目の記事です。

https://qiita.com/advent-calendar/2025/haskell-atcoder

本記事では、最低限HaskellでAtCoderに参加するための環境構築を紹介します。

### 環境

- Ubuntu 22.04 LTS
- Haskell
    - ghc: 9.6.7
- VS Code

### 環境構築する内容

- Haskellが実行できる
- 言語サーバ
- Linter
- Formatter

### 注意

環境構築に時間をかけたくないため、ベストな環境ではないかもしれません。
追加すべきものなどあればコメント等でご指摘いただけると幸いです。

---

## Haskellのコードを実行できるようにする。

HaskellはGHCというコンパイラを使ってコードをコンパイルし、実行します。
GHCのインストールや、その他のツールをGHCupを使うことで簡単にインストールできるので、こちらを使用します。

### GHCupのインストール

[GHCup](https://www.haskell.org/ghcup/install/#how-to-install)のインストール手順を元にしてインストールします。

```shell
# 依存ライブラリ
apt-get update -y
apt-get install --no-install-recommends -y \
  build-essential \
  curl \
  ca-certificates \
  libffi-dev \
  libffi8 \
  libgmp-dev \
  libgmp10 \
  libncurses-dev \
  libncurses5 \
  libtinfo5 \
  pkg-config

# GHCupのインストール
curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh
```

特に指定しない場合`~/.ghcup`配下にインストールされるのでPATHを通しておきます。
自分は`~/.zshrc`に以下を設定しています。

```shell
# 設定例
[ -f "/home/sigma/.ghcup/env" ] && . "/home/sigma/.ghcup/env" # ghcup-env
```

### GHC、HLS(Haskell Language Server)、cabalのインストール

- GHC: コンパイラ本体
- HLS: 言語サーバ
- cabal: パッケージ管理

をインストールします。
[Stack](https://docs.haskellstack.org/en/stable/)を使っても良いですが、競技プログラミングのためにパッケージ管理は不要かなと考え、私は必要なパッケージが登場した際に都度`cabal install`でインストールを行う運用を一旦とっています。

```shell
ghcup install ghc 9.6.7
    ghcup set ghc 9.6.7
    ghcup install cabal 3.12.1.0
    ghcup set cabal 3.12.1.0
    ghcup install hls 2.11.0.0 && \
    ghcup set hls 2.11.0.0
```

:::note info
2025年11月11日現在9.6.7がrecommendedになっているため、こちらを選択しました。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3718390/98188dda-8acd-402b-a5dc-619fb1642491.png)

2025年11月11日現在、AtCoderのGHCのバージョンは9.8.4です。
そのため、AtCoderに特化するなら9.8.4にあわせるほうが無難かも知れません。
:::


:::note info

VS CodeのExtensionsとセットでぽちぽちやってインストールできるツールもあります。

https://marketplace.visualstudio.com/items?itemName=haskell.haskell

上記のExtensionsを追加後に
- GHCupのPATHが通っている
- `"haskell.manageHLS": "GHCup",`(デフォルト)になっている

の場合、VS CodeのGUIからもGHCやHLS等をインストールが可能です。
:::

:::note info
一応[Dockerfile](https://github.com/RyosukeDTomita/atcoder/blob/main/Dockerfile)を作り、Dev Container化してはありますが、フォーマッタとHLSが効くことを確認後には面倒なので使ってないです。
:::

### とりあえず、動かしてみる


```haskell
main :: IO()
main = do
    putStrLn "Hello, World"
```

コンパイルしてから実行するのは面倒なので`runghc`を使うのが最も楽だと思います。

```shell
# インタプリタで実行する
runghc <file_name>.hs
```

競技プログラミングの場合入力を手作業で毎回入力するのが面倒なのでtxtファイルを作って渡すのが楽です。
(VS Codeのタスクランナーとか使えばもっと楽そう)

```shell
# 入力データをtxtファイルから受け取って実行する(これが一番競技プログラミングに向いてそう)
runghc <file_name>.hs < input.txt
```

また、ちょっとした検証には`ghci`コマンドによる対話形式での実行も役に立ちます。

```shell
# 対話形式で実行する
ghci
ghci> putStrLn "Hello, World!"
Hello, World!
ghci> :q
Leaving GHCi.
```

---

## コンテストに参加するための環境をVS Codeで作る

### VS Code Extesionsを入れる

https://marketplace.visualstudio.com/items?itemName=haskell.haskell

### GitHub Copilotをオフにする

生成AIを誤って使わないようにオフにしておきます。

```settings.json
  "github.copilot.enable": {
    "haskell": false
  }
```

### Formatter

`ormolu`を使います。
下記の設定を追加してもFormatterが効かない場合には`cabal`でインストールしておきます。

```settings.json
  "[haskell]": {
    "editor.defaultFormatter": "haskell.haskell",
    "editor.formatOnSave": true
  },
  "haskell.formattingProvider": "ormolu",

```

```shell
cabal install ormolu
```

CLIで実行したい方は以下を実行することで一括でフォーマットがかかります。

```shell
ormolu --mode inplace $(find . -type f -name "*.hs")
```

### Linter

特に設定しなくてもExtensionsが正常に作動していれば使えました。
(HLSに`hlint`というLinterが統合されているらしい)


---

## 追記: Nix Flakeで環境構築した話も書きました

https://qiita.com/sigma_devsecops/items/b9b0597d684775fb8955
